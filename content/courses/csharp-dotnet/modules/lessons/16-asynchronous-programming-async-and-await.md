# Asynchronous Programming: async and await

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥–æ–≤–≥—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
**–±–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**.
–£ C# –¥–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ `async` —Ç–∞ `await`.

---

## üéØ –ú–µ—Ç–∞ —É—Ä–æ–∫—É
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —É—Ä–æ–∫—É —Ç–∏ –∑–º–æ–∂–µ—à:
- —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Ç–∞–∫–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å
- –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `async` —Ç–∞ `await`
- –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ `Task`
- —É–Ω–∏–∫–∞—Ç–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤

---

## üß† –¢–µ–æ—Ä—ñ—è

### –ß–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å
–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–æ–¥ –±–ª–æ–∫—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è,
–ø–æ–∫–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –¥–æ–≤–≥–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è (–∑–∞–ø–∏—Ç –¥–æ –ë–î, —Ñ–∞–π–ª, API).

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å –¥–æ–∑–≤–æ–ª—è—î:
- –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- –∑—Ä–æ–±–∏—Ç–∏ UI-–∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ —á—É–π–Ω–∏–º–∏
- –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏

---

### –©–æ —Ç–∞–∫–µ Task
`Task` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é.

```csharp
Task task = Task.Run(() => Console.WriteLine("Work"));
```

üìå –ë—ñ–ª—å—à—ñ—Å—Ç—å async-–º–µ—Ç–æ–¥—ñ–≤ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å `Task` –∞–±–æ `Task<T>`.

---

### –ö–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ async
`async` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–µ—Ç–æ–¥—É —è–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ.

```csharp
async Task DoWorkAsync()
{
    // –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–æ–¥
}
```

---

### –ö–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ await
`await` –ø—Ä–∏–∑—É–ø–∏–Ω—è—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –º–µ—Ç–æ–¥—É,
–ø–æ–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è,
**–±–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—É**.

```csharp
await Task.Delay(1000);
```

---

### –ü—Ä–æ—Å—Ç–∏–π async-–º–µ—Ç–æ–¥
```csharp
async Task PrintMessageAsync()
{
    await Task.Delay(500);
    Console.WriteLine("Done");
}
```

---

### –í–∏–∫–ª–∏–∫ async-–º–µ—Ç–æ–¥—É
```csharp
await PrintMessageAsync();
```

üìå `await` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –≤ `async`-–º–µ—Ç–æ–¥–∞—Ö.

---

### Task<T>
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –º–µ—Ç–æ–¥ –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è.

```csharp
async Task<int> GetNumberAsync()
{
    await Task.Delay(500);
    return 42;
}
```

---

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å vs –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω—ñ—Å—Ç—å
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å:
- –Ω–µ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –ø–æ—Ç—ñ–∫
- –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü—ñ–π

–ë–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω—ñ—Å—Ç—å:
- –ø—Ä–∞—Ü—é—î –∑ –∫—ñ–ª—å–∫–æ–º–∞ –ø–æ—Ç–æ–∫–∞–º–∏
- –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è CPU-–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å

---

### –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏
- –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `.Result` –∞–±–æ `.Wait()`
- –∑–∞–±—É—Ç–∏–π `await`
- async –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ

üìå –¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ deadlock º—ñ–≤.

---

## üíª –ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥

```csharp
using System;
using System.Threading.Tasks;

class Program
{
    static async Task Main()
    {
        Console.WriteLine("Start");
        await Task.Delay(1000);
        Console.WriteLine("End");
    }
}
```

---

## üìù –ü—ñ–¥—Å—É–º–∫–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å –ø–æ–∫—Ä–∞—â—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- `async` —ñ `await` —Ä–æ–±–ª—è—Ç—å –∫–æ–¥ —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º
- `Task` ‚Äî –æ—Å–Ω–æ–≤–∞ async-–∫–æ–¥—É
- –£–Ω–∏–∫–∞–π –±–ª–æ–∫—É—é—á–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤
