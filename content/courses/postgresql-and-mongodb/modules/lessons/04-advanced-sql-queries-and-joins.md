# Advanced SQL Queries and JOINs

–ù–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤—ñ–¥ –±–∞–∑–æ–≤–∏—Ö SQL-–∑–∞–ø–∏—Ç—ñ–≤
–¥–æ **—Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π**, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ç–∞–±–ª–∏—Ü—è–º–∏,
–∞–≥—Ä–µ–≥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.

---

## üéØ –ú–µ—Ç–∞ —É—Ä–æ–∫—É
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —É—Ä–æ–∫—É —Ç–∏ –∑–º–æ–∂–µ—à:
- —Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫ –ø—Ä–∞—Ü—é—é—Ç—å JOIN-–∑–∞–ø–∏—Ç–∏
- –æ–± º—î–¥–Ω—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∑ –∫—ñ–ª—å–∫–æ—Ö —Ç–∞–±–ª–∏—Ü—å
- –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- –ø–∏—Å–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ SQL-–∑–∞–ø–∏—Ç–∏ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö

---

## üß† –¢–µ–æ—Ä—ñ—è

### –ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ JOIN
–£ —Ä–µ–∞–ª—å–Ω–∏—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–∏—Ö —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è
**—É –∫—ñ–ª—å–∫–æ—Ö –ø–æ–≤ º—è–∑–∞–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—è—Ö**.

–ü—Ä–∏–∫–ª–∞–¥:
- `users` ‚Äî —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `orders` ‚Äî —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

JOIN –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ **—Ä–∞–∑–æ–º**.

---

### –ü—Ä–∏–∫–ª–∞–¥ —Ç–∞–±–ª–∏—Ü—å

```text
users
id | name
1  | Anna
2  | Oleh
```

```text
orders
id | user_id | total
1  | 1       | 100
2  | 1       | 50
3  | 2       | 200
```

---

### INNER JOIN
**INNER JOIN** –ø–æ–≤–µ—Ä—Ç–∞—î –ª–∏—à–µ —Ç—ñ —Ä—è–¥–∫–∏,
—è–∫—ñ –º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —É –¥–≤–æ—Ö —Ç–∞–±–ª–∏—Ü—è—Ö.

```sql
SELECT users.name, orders.total
FROM users
INNER JOIN orders
ON users.id = orders.user_id;
```

üìå –ù–∞–π—á–∞—Å—Ç—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏–π —Ç–∏–ø JOIN.

---

### LEFT JOIN
**LEFT JOIN** –ø–æ–≤–µ—Ä—Ç–∞—î –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –∑ –ª—ñ–≤–æ—ó —Ç–∞–±–ª–∏—Ü—ñ
—Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –∑–∞–ø–∏—Å–∏ –∑ –ø—Ä–∞–≤–æ—ó.

```sql
SELECT users.name, orders.total
FROM users
LEFT JOIN orders
ON users.id = orders.user_id;
```

–Ø–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –Ω–µ–º–∞—î ‚Äî –∑–Ω–∞—á–µ–Ω–Ω—è –±—É–¥–µ `NULL`.

---

### RIGHT JOIN
**RIGHT JOIN** –ø—Ä–∞—Ü—é—î –Ω–∞–≤–ø–∞–∫–∏ ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –∑ –ø—Ä–∞–≤–æ—ó —Ç–∞–±–ª–∏—Ü—ñ.

```sql
SELECT users.name, orders.total
FROM users
RIGHT JOIN orders
ON users.id = orders.user_id;
```

üìå –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ä—ñ–¥—à–µ.

---

### FULL JOIN
**FULL JOIN** –ø–æ–≤–µ—Ä—Ç–∞—î –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –∑ –æ–±–æ—Ö —Ç–∞–±–ª–∏—Ü—å.

```sql
SELECT users.name, orders.total
FROM users
FULL JOIN orders
ON users.id = orders.user_id;
```

---

### –ê–≥—Ä–µ–≥–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
–ê–≥—Ä–µ–≥–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—ñ–≤.

–û—Å–Ω–æ–≤–Ω—ñ:
- `COUNT()`
- `SUM()`
- `AVG()`
- `MIN()`
- `MAX()`

```sql
SELECT COUNT(*) FROM orders;
```

---

### GROUP BY
`GROUP BY` –≥—Ä—É–ø—É—î —Ä—è–¥–∫–∏ –∑–∞ –ø–µ–≤–Ω–∏–º –ø–æ–ª–µ–º.

```sql
SELECT user_id, SUM(total)
FROM orders
GROUP BY user_id;
```

üìå –ß–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ä–∞–∑–æ–º –∑ –∞–≥—Ä–µ–≥–∞—Ç–Ω–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏.

---

### HAVING
`HAVING` –¥–æ–∑–≤–æ–ª—è—î —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø—ñ—Å–ª—è `GROUP BY`.

```sql
SELECT user_id, SUM(total)
FROM orders
GROUP BY user_id
HAVING SUM(total) > 100;
```

---

### –ü—ñ–¥–∑–∞–ø–∏—Ç–∏ (Subqueries)
SQL –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —ñ–Ω—à–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤.

```sql
SELECT name
FROM users
WHERE id IN (
  SELECT user_id
  FROM orders
  WHERE total > 100
);
```

---

## üíª –ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥

```sql
SELECT u.name, SUM(o.total) AS total_spent
FROM users u
JOIN orders o ON u.id = o.user_id
GROUP BY u.name
HAVING SUM(o.total) >= 150
ORDER BY total_spent DESC;
```

–¶–µ–π –∑–∞–ø–∏—Ç:
- –æ–± º—î–¥–Ω—É—î —Ç–∞–±–ª–∏—Ü—ñ
- –≥—Ä—É–ø—É—î –¥–∞–Ω—ñ
- —Ñ—ñ–ª—å—Ç—Ä—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- —Å–æ—Ä—Ç—É—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç

---

## üìù –ü—ñ–¥—Å—É–º–∫–∏
- JOIN –æ–± º—î–¥–Ω—É—î –¥–∞–Ω—ñ –∑ –∫—ñ–ª—å–∫–æ—Ö —Ç–∞–±–ª–∏—Ü—å
- INNER JOIN ‚Äî –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π
- GROUP BY + HAVING ‚Äî –æ—Å–Ω–æ–≤–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
- –°–∫–ª–∞–¥–Ω—ñ SQL-–∑–∞–ø–∏—Ç–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å —Ä–µ–∞–ª—å–Ω—É —Å–∏–ª—É PostgreSQL
