# Indexes and Performance Basics

–ö–æ–ª–∏ –æ–± º—î–º –¥–∞–Ω–∏—Ö –∑—Ä–æ—Å—Ç–∞—î, —à–≤–∏–¥–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ —Å—Ç–∞—î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ—é.
–Ü–Ω–¥–µ–∫—Å–∏ ‚Äî —Ü–µ –æ—Å–Ω–æ–≤–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç PostgreSQL –¥–ª—è **–ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**
—Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ä–æ–±–æ—Ç–∏ –∑ –≤–µ–ª–∏–∫–∏–º–∏ —Ç–∞–±–ª–∏—Ü—è–º–∏.

---

## üéØ –ú–µ—Ç–∞ —É—Ä–æ–∫—É
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —É—Ä–æ–∫—É —Ç–∏ –∑–º–æ–∂–µ—à:
- —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Ç–∞–∫–µ —ñ–Ω–¥–µ–∫—Å–∏ —Ç–∞ –Ω–∞–≤—ñ—â–æ –≤–æ–Ω–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ
- –∑–Ω–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ñ —Ç–∏–ø–∏ —ñ–Ω–¥–µ–∫—Å—ñ–≤ —É PostgreSQL
- —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —ñ–Ω–¥–µ–∫—Å–∏
- —É—Å–≤—ñ–¥–æ–º–ª—é–≤–∞—Ç–∏, —è–∫ —ñ–Ω–¥–µ–∫—Å–∏ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

---

## üß† –¢–µ–æ—Ä—ñ—è

### –ß–æ–º—É –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é
–ö–æ–ª–∏ —Ç–∞–±–ª–∏—Ü—è –º—ñ—Å—Ç–∏—Ç—å —Ç–∏—Å—è—á—ñ –∞–±–æ –º—ñ–ª—å–π–æ–Ω–∏ —Ä—è–¥–∫—ñ–≤,
PostgreSQL –∑–º—É—à–µ–Ω–∏–π **–ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –±–∞–≥–∞—Ç–æ –¥–∞–Ω–∏—Ö** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É.

–ë–µ–∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ü–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ:
- –ø–æ–≤—ñ–ª—å–Ω–∏—Ö SELECT-–∑–∞–ø–∏—Ç—ñ–≤
- –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ø–æ–≥–∞–Ω–æ–≥–æ user experience

---

### –©–æ —Ç–∞–∫–µ —ñ–Ω–¥–µ–∫—Å
**–Ü–Ω–¥–µ–∫—Å** ‚Äî —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö,
—è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î PostgreSQL —à–≤–∏–¥–∫–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ä—è–¥–∫–∏.

–ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:
> —ñ–Ω–¥–µ–∫—Å ‚Äî —Ü–µ —è–∫ –∑–º—ñ—Å—Ç —É –∫–Ω–∏–∑—ñ

–ó–∞–º—ñ—Å—Ç—å –ø–æ–≤–Ω–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É —Ç–∞–±–ª–∏—Ü—ñ –±–∞–∑–∞ –æ–¥—Ä–∞–∑—É –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∑–∞–ø–∏—Å–∏.

---

### –Ø–∫ –ø—Ä–∞—Ü—é—î —ñ–Ω–¥–µ–∫—Å
–ë–µ–∑ —ñ–Ω–¥–µ–∫—Å—É:
- –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è sequential scan (–ø–æ–≤–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞–±–ª–∏—Ü—ñ)

–ó —ñ–Ω–¥–µ–∫—Å–æ–º:
- –±–∞–∑–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î index scan
- –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤ –∑–Ω–∞—á–Ω–æ –º–µ–Ω—à–∞

üìå –¶–µ –æ—Å–æ–±–ª–∏–≤–æ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Ç–∞–±–ª–∏—Ü—å.

---

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É
–Ü–Ω–¥–µ–∫—Å —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–∞–Ω–¥–∏ `CREATE INDEX`.

```sql
CREATE INDEX idx_users_email
ON users(email);
```

–¶–µ–π —ñ–Ω–¥–µ–∫—Å –ø—Ä–∏—à–≤–∏–¥—à–∏—Ç—å –ø–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ email.

---

### –ö–æ–ª–∏ —ñ–Ω–¥–µ–∫—Å–∏ –∫–æ—Ä–∏—Å–Ω—ñ
–Ü–Ω–¥–µ–∫—Å–∏ –≤–∞—Ä—Ç–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥–ª—è —Å—Ç–æ–≤–ø—Ü—ñ–≤, —è–∫—ñ:
- —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ `WHERE`
- –±–µ—Ä—É—Ç—å —É—á–∞—Å—Ç—å —É `JOIN`
- –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ `ORDER BY`

---

### –ö–æ–ª–∏ —ñ–Ω–¥–µ–∫—Å–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ
–Ü–Ω–¥–µ–∫—Å–∏ **–Ω–µ –∑–∞–≤–∂–¥–∏ –∫–æ—Ä–∏—Å–Ω—ñ**.

–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —ñ–Ω–¥–µ–∫—Å–∏:
- –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü—å
- –¥–ª—è —Å—Ç–æ–≤–ø—Ü—ñ–≤, —è–∫—ñ —Ä—ñ–¥–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è
- –¥–ª—è –¥–∞–Ω–∏—Ö, —â–æ —á–∞—Å—Ç–æ –∑–º—ñ–Ω—é—é—Ç—å—Å—è

üìå –ö–æ–∂–µ–Ω —ñ–Ω–¥–µ–∫—Å —É–ø–æ–≤—ñ–ª—å–Ω—é—î INSERT —Ç–∞ UPDATE.

---

### –¢–∏–ø–∏ —ñ–Ω–¥–µ–∫—Å—ñ–≤ —É PostgreSQL
PostgreSQL –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫—ñ–ª—å–∫–∞ —Ç–∏–ø—ñ–≤ —ñ–Ω–¥–µ–∫—Å—ñ–≤:

- **B-tree** (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
- Hash
- GIN
- GiST

–ù–∞–π—á–∞—Å—Ç—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **B-tree**.

---

### –ü–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á —Ç–∞ —ñ–Ω–¥–µ–∫—Å–∏
`PRIMARY KEY` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î —ñ–Ω–¥–µ–∫—Å.

```sql
id SERIAL PRIMARY KEY
```

üìå –¢–æ–º—É –ø–æ—à—É–∫ –ø–æ primary key –∑–∞–≤–∂–¥–∏ —à–≤–∏–¥–∫–∏–π.

---

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É
–î–ª—è –∞–Ω–∞–ª—ñ–∑—É –∑–∞–ø–∏—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `EXPLAIN`.

```sql
EXPLAIN SELECT * FROM users WHERE email = 'test@mail.com';
```

–¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —ñ–Ω–¥–µ–∫—Å.

---

## üíª –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥

```sql
CREATE INDEX idx_orders_user_id
ON orders(user_id);

SELECT * FROM orders
WHERE user_id = 1;
```

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É —Ü–µ–π –∑–∞–ø–∏—Ç –ø—Ä–∞—Ü—é—î –∑–Ω–∞—á–Ω–æ —à–≤–∏–¥—à–µ.

---

## üìù –ü—ñ–¥—Å—É–º–∫–∏
- –Ü–Ω–¥–µ–∫—Å–∏ –ø—Ä–∏—Å–∫–æ—Ä—é—é—Ç—å SELECT-–∑–∞–ø–∏—Ç–∏
- –í–æ–Ω–∏ –æ—Å–æ–±–ª–∏–≤–æ –≤–∞–∂–ª–∏–≤—ñ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Ç–∞–±–ª–∏—Ü—å
- –ù–µ –≤–∞—Ä—Ç–æ —ñ–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ –≤—Å–µ –ø—ñ–¥—Ä—è–¥
- –ê–Ω–∞–ª—ñ–∑ –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ–ø–æ–º–∞–≥–∞—î –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –±–∞–∑—É
